<!DOCTYPE html>
<!--Made by Oliwier Salamon-->
<html>
    <head>
        <title>SP-UTC</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=10" charset="utf-8">
        <link rel="stylesheet" href="style1.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="jquery.zoom.js"></script>
        
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

        

       <script type="text/javascript" src="mapper.js"></script>
       <script type="text/javascript" src="cvi_map_lib.js"></script>

<!-- dodaje mozliwosc responsive map image-->
        <script type="text/javascript">            
        window.onload = function () {

            var ImageMap = function (map, img) {
                    var n,
                        areas = map.getElementsByTagName('area'),
                        len = areas.length,
                        coords = [],
                        previousWidth = 9917;
                    for (n = 0; n < len; n++) {
                        coords[n] = areas[n].coords.split(',');
                    }
                    this.resize = function () {
                        var n, m, clen,
                            x = img.offsetWidth / previousWidth;
                        for (n = 0; n < len; n++) {
                            clen = coords[n].length;
                            for (m = 0; m < clen; m++) {
                                coords[n][m] *= x;
                            }
                            areas[n].coords = coords[n].join(',');
                        }
                        previousWidth = img.offsetWidth;
                        return true;
                    };
                    window.onresize = this.resize;
                },
                imageMap = new ImageMap(document.getElementById('mapa'), document.getElementById('zdjecie'));
                imageMap.resize();

            cvi_map.add(document.getElementById('zdjecie'),{opacity: 50, bordercolor: '#01648c', areacolor: '#01648c', delayed: true});

            return;
        }</script>
<!---->

    </head>


<body>

    <header id="naglowek">
        
        <img id="logomale" src="Logo-CKL-PP-male.png" alt="CKL" class="logomale">
        <div id="szukajka">Szukaj...</div>
        <input type="image" src="lupaikona.png" id="lupka" onclick="$('#zdjeciecontainer').zoom({ on:'click', magnify: 0.5, onZoomIn: function(){document.querySelector('#lupka').value='Kliknij na zdjęcie, aby wyjść z powiększenia';}, onZoomOut: function(){$('#zdjeciecontainer').trigger('zoom.destroy');  document.querySelector('#lupka').disabled = false;  document.querySelector('#lupka').type='image';  document.querySelector('#szukajka').style.display='initial';}}); 
                                    document.querySelector('#szukajka').style.display='none';
                                    document.querySelector('#lupka').type = 'button';
                                    document.querySelector('#lupka').value='Kliknij na zdjęcie, aby powiększyć';
                                    document.querySelector('#lupka').disabled = true;"></input>
        <button onclick="zoomowanie('throttle');">ELO</button>
    </header>

    <main>

    <button onmouseover="extAreaOver('zdjecie','garmin');" onmouseout="extAreaOut('zdjecie','garmin');" onclick="zoomowanie('garmin2');">Garminy</button>

    <div id="zdjeciecontainer" class="layoutzdjecie" onclick="zoom.out({callback: function(){document.body.style.overflow = 'initial';}});">
    <img id="zdjecie" src="SPUTCrgb.jpg" usemap="#image-map" class="mapper iborder01648c icolor01648c">
    <map id="mapa" name="image-map">
        <area id="garmin" target="_blank" alt="Garmin" title="Garmin" href="garmin.html" coords="2177,631,4157,2129" shape="rect" rel="garmin2">
        <area id="garmin2" target="_blank" alt="Garmin2" title="Garmin2" href="garmin2.html" coords="4602,640,6582,2138" shape="rect" rel="garmin">
        <area id="throttle" target="_blank" alt="Throttle" title="Throttle" href="throttle.html" coords="4893,3802,136" shape="circle">
    </map>
</div>





</main>
<br>

    <footer id="footerdesktop">
        <div id="nazwiskodesktop">Oliwier Salamon</div>
        <div id="napisfooterdesktop">
    Strona stworzona dla Centrum Kształcenia Lotniczego Politechniki Poznańskiej
        </div>
    </div>
    
    <div id="footermobile">
        <div id="napisfootermobile">
    Strona stworzona dla Centrum Kształcenia Lotniczego Politechniki Poznańskiej
        </div>
        <div id="nazwiskomobile">Oliwier Salamon</div>
    </footer>
    
           <!-- ukrywa przycisk lupy na mobilnych-->
           <script type="text/javascript">
            if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
             // true dla mobilnych
             document.querySelector("#lupka").style.display="none";
             var telefon = 1;
           }else{var telefon = 0;}
             </script>
             <!---->

    <!-- zoom do przyblizania po szukaniu-->
    <script src="zoom.js"></script>
    <!-- obliczanie srodka area i zoomowanie do niego-->
    <script type="text/javascript"> function zoomowanie(nazwazoom){ 
        var maxX = 0,
        minX = Infinity,
        maxY = 0,
        minY = Infinity,
        i = 0,
        szerokoscokna = document.documentElement.clientWidth,
        wysokoscokna = document.documentElement.clientHeight;

            coords = document.querySelector('#'+nazwazoom).getAttribute('coords').split(',');
            //to if jest dla circle tylko
            if(coords.length == 3){
                var x = parseInt(coords[0],10),
                    y = parseInt(coords[1],10);

                    var skala = Math.max(Math.min((0.75*szerokoscokna) / (parseInt(coords[2],10)), (0.75*wysokoscokna-110) / (parseInt(coords[2],10))), 1);
            }else{
 while (i < coords.length) {
            var x = parseInt(coords[i++],10),
                y = parseInt(coords[i++],10);

            if (x < minX) minX = x;
            else if (x > maxX) maxX = x;

            if (y < minY) minY = y;
            else if (y > maxY) maxY = y;
        }

 x = minX + (maxX - minX) / 2;
 y = minY + (maxY - minY) / 2; 
 //Math max i min sa po to w razie gdyby cos bylo bardzo dlugie a waskie lub odwrotnie
 //-110 przy height jest na naglowek i footer
 var skala = Math.max(Math.min((0.75*szerokoscokna) / (maxX - minX),(0.75*wysokoscokna-110) / (maxY - minY) ), 1);
 
    }
 if(telefon == 1){if(skala > 4){skala = 4;}}else{if(skala > 2){skala = 2;}}
 if(window.scrollY != 0){window.scrollTo({top: 0, behavior: 'smooth' }); //scrolluje na gore tylko jesli nie jest jeszcze na gorze bo inaczej zle przenosi
 setTimeout(function(){ zoom.to({
    x: x,
    y: y+40,
    scale: skala
  });},500); //czas po scrollu zeby przyblizyc
}else{zoom.to({
    x: x,
    y: y+40,
    scale: skala
  });}

  document.body.style.overflow = "hidden";
  alert(skala);
}
  
  </script>
  <!---->

</body>


</html>